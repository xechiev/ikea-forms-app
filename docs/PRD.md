# IKEA Installation Forms Manager - PRD

## Product Overview

**Product Name:** IKEA Forms Manager (Ñ€Ğ°Ğ±Ğ¾Ñ‡ĞµĞµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ)
**Version:** MVP 1.0
**Target Users:** Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ğ½Ñ‹-ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ñ‰Ğ¸ĞºĞ¸ IKEA ĞºÑƒÑ…Ğ¾Ğ½ÑŒ (Phoenix NY Inc.)
**Platform:** PWA (Progressive Web App) Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ… ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²

---

## Problem Statement

Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ñ‰Ğ¸ĞºĞ¸ IKEA ĞºÑƒÑ…Ğ¾Ğ½ÑŒ Ñ‚Ñ€Ğ°Ñ‚ÑÑ‚ Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ğ½Ğ° Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ±ÑƒĞ¼Ğ°Ğ¶Ğ½Ñ‹Ñ…/PDF Ñ„Ğ¾Ñ€Ğ¼ Ğ½Ğ° Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ°Ñ…:
- ĞĞµÑƒĞ´Ğ¾Ğ±Ğ½Ğ¾ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑÑ‚ÑŒ PDF Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°
- Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ²Ğ²Ğ¾Ğ´ Ğ¾Ğ´Ğ½Ğ¸Ñ… Ğ¸ Ñ‚ĞµÑ… Ğ¶Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Customer, Address, Installer) Ğ½Ğ° ĞºĞ°Ğ¶Ğ´ÑƒÑ Ñ„Ğ¾Ñ€Ğ¼Ñƒ
- Ğ Ğ¸ÑĞº Ğ·Ğ°Ğ±Ñ‹Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ
- Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑĞ¼Ğ¸ Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¾Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²

---

## Solution

ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ PWA-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ:
1. **ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³Ğ¾Ğ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…** Ğ¸Ğ· Ñ‚ĞµĞºÑÑ‚Ğ° ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€Ñ Google
2. **ĞĞ²Ñ‚Ğ¾Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸ĞµĞ¼** ÑˆĞ°Ğ¿Ğ¾Ğº Ñ„Ğ¾Ñ€Ğ¼
3. **ĞŸĞ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ñ‹Ğ¼ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ¾Ğ¼** Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ
4. **Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸ĞµĞ¹** Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹
5. **Ğ­Ğ»ĞµĞºÑ‚Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑĞ¼Ğ¸**
6. **Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ¼ Ğ² PDF** Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¾Ğ¹ Ğ² Telegram

---

## User Roles (MVP)

### Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ğ½ (Installer)
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ·Ğ°ĞºĞ°Ğ· Ñ‡ĞµÑ€ĞµĞ· Ğ²ÑÑ‚Ğ°Ğ²ĞºÑƒ Ñ‚ĞµĞºÑÑ‚Ğ°
- Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ñ‹ Ğ½Ğ° Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğµ
- Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¸ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
- ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ñ‹

---

## Job Types & Required Forms

| Ğ¢Ğ¸Ğ¿ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ | ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ĞµĞ»ÑŒ | Ğ¤Ğ¾Ñ€Ğ¼Ñ‹ |
|------------|-------------|-------|
| **Installation** | ĞĞµÑ‚ "prefit" Ğ¸ "wo" | Start Notes â†’ Kitchen Article Request â†’ Change Notes â†’ Completion Report â†’ Wall Anchoring |
| **Work Order (WO)** | Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ "wo" | Change Notes â†’ Completion Report |
| **Prefit** | Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ "prefit" | Site Condition Report |

---

## Core Features (MVP)

### 1. Text Parser
**Input:** Ğ¢ĞµĞºÑÑ‚ Ğ¸Ğ· Google Calendar
```
Confirmed/IKEA CT Windzer Pierre-Louis 12033260349
Ğ’Ñ‚Ğ¾Ñ€Ğ½Ğ¸Ğº, 2 Ğ´ĞµĞºĞ°Ğ±Ñ€Ñâ‹…9:00AMâ€“6:00PM
3 Locust Ln, Farmington, CT 06032, USA
door
```

**Output:**
```json
{
  "status": "confirmed",
  "jobType": "installation",
  "region": "CT",
  "customer": {
    "name": "Windzer Pierre-Louis",
    "phone": "2033260349"
  },
  "address": "3 Locust Ln, Farmington, CT 06032, USA",
  "date": "2024-12-02",
  "time": "9:00AMâ€“6:00PM",
  "notes": "door"
}
```

**Parser Rules:**
- `prefit` Ğ² Ñ‚ĞµĞºÑÑ‚Ğµ â†’ jobType = "prefit"
- `wo` Ğ² Ñ‚ĞµĞºÑÑ‚Ğµ â†’ jobType = "wo"
- Ğ˜Ğ½Ğ°Ñ‡Ğµ â†’ jobType = "installation"
- Ğ˜Ğ¼Ñ: 2-3 ÑĞ»Ğ¾Ğ²Ğ° Ñ Ğ·Ğ°Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ¹ Ğ±ÑƒĞºĞ²Ñ‹ Ğ¿Ğ¾ÑĞ»Ğµ IKEA/Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğ°, Ğ´Ğ¾ Ñ†Ğ¸Ñ„Ñ€
- Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½: 10-11 Ñ†Ğ¸Ñ„Ñ€ Ğ² ĞºĞ¾Ğ½Ñ†Ğµ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ¾ĞºĞ¸
- ĞĞ´Ñ€ĞµÑ: ÑÑ‚Ñ€Ğ¾ĞºĞ° Ñ ZIP ĞºĞ¾Ğ´Ğ¾Ğ¼ (5 Ñ†Ğ¸Ñ„Ñ€)
- Ğ ĞµĞ³Ğ¸Ğ¾Ğ½: 2 Ğ·Ğ°Ğ³Ğ»Ğ°Ğ²Ğ½Ñ‹Ğµ Ğ±ÑƒĞºĞ²Ñ‹ Ğ¿Ğ¾ÑĞ»Ğµ IKEA

### 2. Installer Profile (Local Storage)
```json
{
  "name": "John Smith",
  "phone": "1234567890",
  "company": "Phoenix NY Inc."
}
```
- Ğ’Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ· Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ
- Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ² localStorage
- ĞœĞ¾Ğ¶Ğ½Ğ¾ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ…

### 3. Form Filling Interface

#### Start Notes (3 pages)
**Page 1 - Header & Pre-installation:**
- Customer (auto)
- Address (auto)
- Installer (auto)
- 14 checkboxes (pre-installation discussion)

**Page 1 - Appliance Fit Guide:**
- 7 appliances Ã— (New/Existing radio + W/D/H measurements)

**Page 1 - Job Site Conditions:**
- Text area for notes
- Customer signature
- Installer signature

**Page 2 - Ceiling & Toe Kick:**
- Ceiling gaps (largest/smallest)
- Toe kick gaps (largest/smallest)
- Ceiling treatment (6 radio options)
- Under cabinet trim (4 radio options)

**Page 3 - Cabinet Placement:**
- Countertop thickness
- Notes text area
- Customer signature
- Installer signature

#### Change Notes (1 page)
- Customer, Address, Installer (auto)
- 12 rows: Description, Price, Quantity, Total
- Total amount (auto-calculated)
- Date fields
- Signatures

#### Kitchen Article Request (1 page)
- Customer info (name, phone, email, order#)
- Installer info (name, phone, notes)
- Date, Scheduled end
- Parts Damaged table (7 rows)
- Parts Needed table (7 rows)

#### Completion Report (1 page)
- Customer, Address, Installer (auto)
- Satisfaction rating (1-5)
- Walkthrough checklist (Customer + Installer checkboxes)
- Additional work notes
- Missing items table (6 rows)
- Signatures

#### Wall Anchoring (2 pages)
- Customer name, Address
- Date, Installer name, Company
- Drywall with wooden studs section
- Drywall with metal studs section
- Solid concrete/block/brick section
- Hollow concrete/block/brick section
- Island/peninsula section

#### Site Condition Report (2 pages) - Prefit only
- Contact, Address, Phone
- Work Order Number, Service Territory, Service Resource Id
- Actual Start Date
- Plan Readiness checklist
- Additional Notes
- Signatures

### 4. Validation System

**Required Field Rules:**
- Customer name: required
- Address: required
- Installer name: required
- All checkbox sections: at least awareness (not required to check all)
- Signatures: required before export

**Empty Form Handling:**
- Kitchen Article Request: If no damaged/missing items, fill first row with "None"
- Change Notes: If no changes, fill first row with "N/A - No additional work"

### 5. Signature Capture

**Flow:**
1. User taps "Sign" button
2. Optional: "View Full Document" button â†’ shows PDF preview
3. Full-screen signature canvas appears
4. User signs with finger
5. Signature saved as PNG
6. Embedded into PDF at correct position

### 6. PDF Export

**Process:**
1. Take original IKEA PDF template
2. Fill form fields with entered data
3. Embed signature images
4. Generate filled PDF
5. Save to device / Share

### 7. Telegram Integration

**Flow:**
1. User completes all forms for a job
2. Taps "Send to Telegram"
3. Bot sends all PDFs to foreman's group
4. Confirmation shown in app

---

## Technical Architecture

### Frontend Stack
- **Framework:** React 18
- **Build:** Vite
- **PWA:** vite-plugin-pwa
- **State:** Zustand (simple, works offline)
- **Forms:** React Hook Form
- **Styling:** Tailwind CSS
- **Signature:** react-signature-canvas
- **PDF:** pdf-lib (client-side PDF manipulation)
- **i18n:** react-i18next (EN/RU)

### Data Storage (MVP - Local Only)
```
localStorage:
â”œâ”€â”€ installer-profile     # Installer data
â”œâ”€â”€ current-job          # Active job data
â”œâ”€â”€ draft-forms          # In-progress form data
â””â”€â”€ completed-jobs       # History (last 50)
```

### Offline Support
- Service Worker caches app shell
- Form data saved to localStorage
- PDF templates cached
- Sync when online (future)

### File Structure
```
ikea-forms-app/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ templates/           # Original IKEA PDF templates
â”‚   â”‚   â”œâ”€â”€ start-notes.pdf
â”‚   â”‚   â”œâ”€â”€ change-notes.pdf
â”‚   â”‚   â”œâ”€â”€ kitchen-articles.pdf
â”‚   â”‚   â”œâ”€â”€ completion-report.pdf
â”‚   â”‚   â”œâ”€â”€ wall-anchoring.pdf
â”‚   â”‚   â””â”€â”€ site-condition.pdf
â”‚   â””â”€â”€ manifest.json
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Checkbox.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TextField.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RadioGroup.tsx
â”‚   â”‚   â”‚   â””â”€â”€ SignatureCanvas.tsx
â”‚   â”‚   â”œâ”€â”€ forms/
â”‚   â”‚   â”‚   â”œâ”€â”€ StartNotes/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChangeNotes/
â”‚   â”‚   â”‚   â”œâ”€â”€ KitchenArticles/
â”‚   â”‚   â”‚   â”œâ”€â”€ CompletionReport/
â”‚   â”‚   â”‚   â”œâ”€â”€ WallAnchoring/
â”‚   â”‚   â”‚   â””â”€â”€ SiteCondition/
â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚       â”œâ”€â”€ AppShell.tsx
â”‚   â”‚       â””â”€â”€ FormStepper.tsx
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useParser.ts
â”‚   â”‚   â”œâ”€â”€ useLocalStorage.ts
â”‚   â”‚   â””â”€â”€ usePdfExport.ts
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”œâ”€â”€ jobStore.ts
â”‚   â”‚   â””â”€â”€ installerStore.ts
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ parser.ts
â”‚   â”‚   â”œâ”€â”€ pdfFiller.ts
â”‚   â”‚   â””â”€â”€ validation.ts
â”‚   â”œâ”€â”€ locales/
â”‚   â”‚   â”œâ”€â”€ en.json
â”‚   â”‚   â””â”€â”€ ru.json
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ App.tsx
â”‚   â””â”€â”€ main.tsx
â”œâ”€â”€ pdf-field-maps/          # JSON maps of PDF field IDs
â”‚   â”œâ”€â”€ start-notes.json
â”‚   â”œâ”€â”€ change-notes.json
â”‚   â””â”€â”€ ...
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ PRD.md
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

---

## UI/UX Design Principles

### Mobile-First
- Large touch targets (min 44px)
- Single column layout
- Swipe navigation between form sections
- Bottom-anchored action buttons

### Form Flow
1. **Home:** Paste text or view recent jobs
2. **Job Created:** Shows parsed data, select forms
3. **Form List:** Progress indicator for each form
4. **Form View:** Step-by-step sections
5. **Review:** Preview before export
6. **Export:** Generate PDF, share

### Visual Feedback
- âœ… Completed sections
- ğŸ”´ Required fields missing
- ğŸŸ¡ In progress
- Haptic feedback on signature save

---

## MVP Scope Boundaries

### In Scope
- Text parsing from calendar
- Local installer profile
- All 6 form types
- Basic validation
- Signature capture
- PDF generation
- Telegram share (manual)
- Offline form filling
- EN/RU languages

### Out of Scope (Phase 2)
- Backend server
- User authentication
- Manager dashboard
- Job assignment
- Push notifications
- Analytics
- Telegram bot automation
- Photo upload to app
- Multi-device sync

---

## Success Metrics

1. **Time saved:** Form filling time reduced by 50%
2. **Error reduction:** Zero missing required fields
3. **Adoption:** All foremen using daily within 2 weeks
4. **Reliability:** Works offline on all job sites

---

## Timeline

**Week 1:**
- Project setup, PDF field mapping
- Parser implementation
- Basic form components

**Week 2:**
- All form interfaces
- Validation system
- Signature capture

**Week 3:**
- PDF generation
- Offline support
- Testing with real forms

**Week 4:**
- Polish, bug fixes
- Deploy to Vercel
- User testing with foremen
